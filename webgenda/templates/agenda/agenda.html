{% extends "base.html" %}

{% block title %}Agenda{% endblock %}

{% block content %}
<div class="calendar-container" 
     data-api-url="{% url 'api_dados_dia' ano=0 mes=0 dia=0 %}"
     data-add-event-url-base="{% url 'cadastrar_evento' ano=0 mes=0 dia=0 %}"
     data-delete-event-url-base="{% url 'excluir_evento' id_evento=0 %}"
     data-current-year="{{ current_year }}"
     data-current-month="{{ current_month_number }}">
    <div class="calendar-header">
        <a href="?year={{ prev_year }}&month={{ prev_month }}" class="btn-nav">&lt; Anterior</a>
        
        <form method="get" class="date-selector-form">
            <h2 style="margin: 0;">{{ current_month_name }}</h2>
            <select name="year" onchange="this.form.submit()">
                {% for year in year_range %}
                    <option value="{{ year }}" {% if year == current_year %}selected{% endif %}>{{ year }}</option>
                {% endfor %}
            </select>
            <input type="hidden" name="month" value="{{ current_month_number }}">
        </form>
        
        <a href="?year={{ next_year }}&month={{ next_month }}" class="btn-nav">Próximo &gt;</a>
    </div>

    {{ html_calendar|safe }}
    
<div class="calendar-legend">
    <div class="legend-item"><span class="color-box legend-event"></span> Evento</div>
    <div class="legend-item"><span class="color-box legend-pesquisa"></span> Pesquisa</div>
    <div class="legend-item"><span class="color-box legend-ensino"></span> Ensino</div>
    <div class="legend-item"><span class="color-box legend-extensao"></span> Extensão</div>
    <div class="legend-item"><span class="color-box legend-administracao"></span> Administração</div>
    <div class="legend-item"><span class="color-box legend-multiple"></span> Múltiplas Atividades</div>
</div>

</div>
<div id="details-modal" class="modal">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modal-title"></h2>
        <div id="modal-body"></div>
        <div id="modal-actions" class="form-actions" style="margin-top: 20px;"></div>
    </div>
</div>
{% endblock %}